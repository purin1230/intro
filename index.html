<!DOCTYPE html>

<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>è»Šéº—å±‹è¿è³“å°è¦½ï½œä½ çš„è»Šè¼›ç§˜æ›¸ CarGo</title>
<style>
:root{
  --brand:#E50012; --ink:#0f172a; --muted:#475569; --line:#e5e7eb;
  --bg:#ffffff; --soft:#fff1f2; --ok:#16a34a;
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;background:var(--bg);color:var(--ink);
  font-family:"Noto Sans TC",system-ui,-apple-system,"PingFang TC","Microsoft JhengHei",sans-serif}
a{color:var(--brand);text-decoration:none}
.header{position:sticky;top:0;z-index:30;background:#fff;border-bottom:1px solid var(--line);}
.headwrap{max-width:1000px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:12px 16px;}
.brand{display:flex;align-items:center;gap:10px}
.dot{width:24px;height:24px;border-radius:8px;background:var(--brand)}
.brand span{font-weight:900;color:var(--brand)}
.btn{border:1px solid var(--brand);color:var(--brand);background:#fff;padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:800}
.btn.primary{background:var(--brand);color:#fff}
.btn.ghost{border-color:var(--line);color:#0f172a}
.wrap{max-width:1000px;margin:0 auto;padding:16px}

.global-steps{position:sticky; top:61px; z-index:24; background:#ffffff; border-bottom:2px solid var(--line);}
.global-steps .wrap{max-width:1000px; margin:0 auto; padding:8px 16px;}
.gs-row{display:flex; align-items:center; justify-content:space-between; gap:10px;}
.steps{display:flex; flex-wrap:wrap; gap:6px;}
.step{padding:8px 14px;border-radius:12px 12px 0 0;border:1px solid var(--line);border-bottom:none;color:#64748b;font-weight:700;background:#fff;cursor:pointer;user-select:none}
.step.active{box-shadow:0 -2px 0 #E50012 inset, 0 1px 0 #ffffff inset;background:#fff;color:#E50012;border-color:#ffd6da}
.step.done{background:#ecfdf5;color:#16a34a;border-color:#bbf7d0}
.pager{color:#64748b}

.topbar{background:#ffffff;border-bottom:1px solid var(--line)}
.topwrap{max-width:1000px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:6px;padding:10px 16px}
.toptext{color:#334155;line-height:1.7}
.toptext strong{font-size:17px;font-weight:900}
.toptext .sep{color:#E50012;margin:0 8px;font-weight:800}
.toptext .desc{font-size:16px;color:#475569}
@media (max-width: 600px){
  .toptext{display:flex;flex-wrap:wrap;gap:4px;line-height:1.75}
  .toptext .sep{flex-basis:100%;height:0;visibility:hidden}
  .toptext .desc{font-size:15px}
}

.card{background:#fff;border:1px solid var(--line);border-radius:16px;padding:18px;box-shadow:0 8px 20px rgba(0,0,0,.05)}
.h1{font-size:26px;margin:0 0 6px 0}
.lead{color:#334155;margin:0 0 10px 0;line-height:1.75}
.kv{min-height:220px;border-radius:16px;background:linear-gradient(135deg,#fff7f8,#ffffff);box-shadow:0 8px 22px rgba(229,0,18,.08)}
.section{display:grid;grid-template-columns: 1.2fr 1fr;gap:16px;margin-top:10px}
@media (max-width: 900px){ .section{grid-template-columns:1fr}}
.select{background:#fff;border:1px solid var(--line);border-radius:12px;padding:10px}
.label{font-size:12px;color:#64748b;margin-bottom:6px}
select{width:100%;padding:10px 12px;border:1px solid #e2e8f0;border-radius:10px;font-size:14px}
.list{list-style:none;margin:8px 0 0 0;padding:0}
.list li{display:flex;gap:10px;margin:8px 0}
.dot2{width:10px;height:10px;border-radius:50%;background:var(--brand);margin-top:7px}
.badge{display:inline-block;padding:6px 10px;border-radius:999px;background:var(--soft);color:var(--brand);font-weight:800;border:1px solid #ffd6da;font-size:12px}
.nav{display:flex;justify-content:space-between;align-items:center;margin-top:16px;gap:10px}
.nav .btn{min-width:140px}
@media (max-width: 540px){
  .nav{flex-direction:column}
  .nav .btn{width:100%;min-width:unset}
}
.note{ font-size:13px; color:#64748b; }

/* Views as paginated panels */
.view{display:none;opacity:0;transform:translateY(4px);}
.view.show{display:block;animation:fadeIn .28s ease forwards;}
@keyframes fadeIn{to{opacity:1;transform:none}}

.footer{color:#64748b;text-align:center;padding:20px 12px;margin-top:20px}



/* v27: Single-row stepper with horizontal scroll on small screens */
.steps{display:flex; flex-wrap:nowrap; gap:10px; overflow:hidden}
.steps .step{flex:0 0 auto}
@media (max-width: 900px){
  .gs-row{align-items:flex-start}
  .steps{overflow-x:auto; -webkit-overflow-scrolling:touch; scrollbar-width:none; padding-bottom:4px}
  .steps::-webkit-scrollbar{display:none}
}

/* v28: remove right-side progress; left-align stepper */
.gs-row{justify-content:flex-start !important}
</style>
</head>
<body>
<div class="header">
<div class="headwrap">
<div class="brand"><span class="dot"></span><span>è»Šéº—å±‹ Car Quality</span></div>
<div></div>
</div>
</div>
<!-- Global stepper + progress -->
<div aria-label="å°è¦½æ­¥é©Ÿ" class="global-steps" role="navigation">
<div class="wrap">
<div class="gs-row">
<div class="steps" id="stepper" role="tablist">
<div aria-controls="panel-step-1" class="step active" id="tab-step-1" role="tab" tabindex="0">1 æ­¡è¿</div>
<div aria-controls="panel-step-2" class="step" id="tab-step-2" role="tab" tabindex="0">2 è¨­å®šè»Šå‹</div>
<div aria-controls="panel-step-3" class="step" id="tab-step-3" role="tab" tabindex="0">3 æœƒå“¡æ¬Šç›Š</div>
<div aria-controls="panel-step-4" class="step" id="tab-step-4" role="tab" tabindex="0">4 å°ˆå±¬æœå‹™</div>
<div aria-controls="panel-step-5" class="step" id="tab-step-5" role="tab" tabindex="0">5 å®Œæˆ</div>
</div>

</div>
</div>
</div>
<!-- Warm topbar -->
<div aria-label="å°è¦½æç¤º" class="topbar" role="region">
<div class="topwrap">
<div class="toptext"><strong>å—¨ï¼Œæˆ‘æ˜¯ä½ çš„è»Šè¼›ç§˜æ›¸ CarGoã€‚</strong><span class="sep">ï½œ</span><span class="desc">èŠ± 1 åˆ†é˜å®Œæˆè¨­å®šï¼Œæˆ‘å°±æœƒè¨˜ä½ä½ çš„æ„›è»Šï¼Œé™ªä½ ä¸€èµ·å®ˆè­·æ¯ä¸€æ¬¡å‡ºç™¼ã€‚</span></div>
</div>
</div>
<div class="wrap">
<!-- STEP 1 -->
<section aria-labelledby="tab-step-1" class="view show" data-step="1" id="panel-step-1" role="tabpanel">
<div class="section">
<div class="card">
<h3 class="title">æº–å‚™å¥½äº†å—ï¼Ÿ</h3>
<p class="lead">åªéœ€å¹¾å€‹å°æ­¥é©Ÿï¼Œæˆ‘æœƒå¸¶ä½ å®Œæˆè¨­å®šï¼›ä¹‹å¾Œçš„å…§å®¹éƒ½æœƒä¾ä½ çš„æ„›è»Šé¡¯ç¤ºå°ˆå±¬å•†å“ã€‚</p>
</div>
<div aria-hidden="true" class="kv card"></div>
</div>
<div class="nav">
<div></div>
<div><button class="btn primary" data-next="">ä¸‹ä¸€æ­¥</button></div>
</div>
</section>
<!-- STEP 2 -->
<section aria-labelledby="tab-step-2" class="view" data-step="2" id="panel-step-2" role="tabpanel">
<div class="section">
<div class="card">
<h3 class="title">è¨­å®šè»Šå‹</h3>
<p class="lead">å…ˆå¹«æˆ‘èªè­˜ä½ çš„è»Šï¼šé¸å¥½å“ç‰Œã€å¹´ä»½èˆ‡è»Šå‹ï¼Œä¹‹å¾Œæˆ‘æœƒè‡ªå‹•åªé¡¯ç¤ºé©é…çš„å•†å“èˆ‡æœå‹™ã€‚</p>
<div class="section" style="grid-template-columns: repeat(3,1fr)">
<div class="select">
<div class="label">å“ç‰Œ</div>
<select id="brand"><option>TOYOTA</option><option>HONDA</option><option>BMW</option></select>
</div>
<div class="select">
<div class="label">å¹´ä»½</div>
<select id="year"><option>2025</option><option>2024</option><option>2023</option></select>
</div>
<div class="select">
<div class="label">è»Šå‹</div>
<select id="model"><option>RAV4</option><option>Corolla Altis</option><option>Yaris Cross</option></select>
</div>
</div>
<div class="note">æœ‰å¤šå°è»Šä¹Ÿæ²’é—œä¿‚ï¼Œå¯ä»¥ä¸€å°å°åŠ å…¥ï¼Œæˆ‘éƒ½æœƒè¨˜ä½ã€‚</div>
<div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
<button class="btn" id="saveCar">å„²å­˜è‡³æˆ‘çš„è»Šåº«</button>
<span class="lead" id="saveMsg" style="font-size:14px;color:#0f766e"></span>
</div>
<div class="banner" id="savedBanner" style="display:none;margin-top:10px;padding:10px;border:1px solid #bbf7d0;background:#ecfdf5;border-radius:12px;color:#065f46">å·²è¨˜ä½ä½ çš„æ„›è»Šï¼æ¥ä¸‹ä¾†çœ‹åˆ°çš„å…§å®¹ï¼Œæœƒè‡ªå‹•ä¾ç…§é€™å°è»Šé‡èº«æ•´ç†ã€‚</div>
</div>
<div class="card"></div>
</div>
<div class="nav">
<button class="btn ghost" data-prev="">ä¸Šä¸€æ­¥</button>
<div><button class="btn primary" data-next="">ä¸‹ä¸€æ­¥</button></div>
</div>
</section>
<!-- STEP 3 -->
<section aria-labelledby="tab-step-3" class="view" data-step="3" id="panel-step-3" role="tabpanel">
<div class="section">
<div class="card">
<h3 class="title">æœƒå“¡æ¬Šç›Š</h3>
<p class="lead">åŠ å…¥æœƒå“¡ä¹‹å¾Œï¼Œæ¯ä¸€æ¬¡æ¶ˆè²»éƒ½ç®—æ•¸ï¼›ç”Ÿæ—¥ã€æœƒå“¡æ—¥ä¹Ÿæœ‰å°é©šå–œã€‚æˆ‘æœƒæŠŠé‡è¦æé†’å®‰æ’å¾—å‰›å‰›å¥½ï¼Œä¸æ‰“æ“¾ã€ä½†ä¸æœƒéŒ¯éã€‚</p>
<p class="note">æç¤ºï¼šé»æ•¸æœ€é«˜å¯æŠ˜æŠµå–®ç­† 50% é‡‘é¡ï¼›è©³ç´°è¾¦æ³•å¯åœ¨æœƒå“¡å°ˆå€æŸ¥çœ‹ã€‚</p>
<ul class="list">
<li><span class="dot2"></span><div><b>é»æ•¸ç´¯ç©èˆ‡æŠ˜æŠµ</b>ï¼šæ¯æ¶ˆè²» 1 å…ƒç´¯ç© 1 é»ï¼›é»æ•¸å¯æŠ˜æŠµæ¶ˆè²»ï¼Œå–®ç­†æœ€é«˜å¯æŠ˜æŠµ 50%ã€‚</div></li>
<li><span class="dot2"></span><div><b>æœƒå“¡åƒ¹èˆ‡æœƒå“¡æ—¥</b>ï¼šå…¨å°é–€å¸‚èˆ‡å®˜ç¶²çš†äº«æœƒå“¡åƒ¹ï¼›æ¯æœˆ 10 è™Ÿå›é¥‹åŠ å€ã€‚</div></li>
<li><span class="dot2"></span><div><b>ç”Ÿæ—¥å°ˆå±¬</b>ï¼šç”Ÿæ—¥ç•¶æœˆè´ˆé€å„ªæƒ åˆ¸æˆ–é»æ•¸ã€‚</div></li>
<li><span class="dot2"></span><div><b>å°ˆå±¬å•†å“èˆ‡æ´»å‹•</b>ï¼šæŒ‡å®šå•†å“äº«æ›´é«˜é»æ•¸å›é¥‹ï¼›ä¸å®šæœŸæœƒå“¡é™å®šæ´»å‹•ã€‚</div></li>
<li><span class="dot2"></span><div><b>å…è²»å¥æª¢</b>ï¼šé ç´„äº«å…è²» 18 é …å…¨è»Šå®‰å…¨æª¢æŸ¥ã€‚</div></li>
<li><span class="dot2"></span><div><b>è¼ªèƒåŠ å€¼æœå‹™</b>ï¼šè²· 4 æ¢è¼ªèƒé€ 3D å››è¼ªå®šä½ï¼›å¾ŒçºŒå…è²»è£œèƒã€6 æ¬¡å°èª¿èˆ‡å‰è¼ªå¹³è¡¡ã€‚</div></li>
<li><span class="dot2"></span><div><b>å…¨é¢é›»å­åŒ–</b>ï¼šæœƒå“¡å¡èˆ‡å„ªæƒ åˆ¸é›»å­åŒ–ï¼›ä¿é¤Šç´€éŒ„ç·šä¸ŠæŸ¥çœ‹ã€‚</div></li>
<li><span class="dot2"></span><div><b>æœƒå“¡æ•ˆæœŸ</b>ï¼šæ•ˆæœŸä¸€å¹´ï¼Œå¯çºŒè²»æˆ–æœŸé–“æ¶ˆè²»æ»¿é¡å»¶é•·ã€‚</div></li>
<li><span class="dot2"></span><div><b>é©ç”¨ç¯„åœ</b>ï¼šå¤šæ•¸å“é …èˆ‡ä¿ƒéŠ·å“å¯ç´¯é»ï¼›èˆ‡ HAPPYGO è¯åå¡æ“‡ä¸€ç´¯é»ï¼›éƒ¨åˆ†å•†å“ä¸é©ç”¨ HAPPYGO ç´¯é»ã€‚</div></li>
</ul>
</div>
<div class="card"></div>
</div>
<div class="nav">
<button class="btn ghost" data-prev="">ä¸Šä¸€æ­¥</button>
<div><button class="btn primary" data-next="">ä¸‹ä¸€æ­¥</button></div>
</div>
</section>
<!-- STEP 4 (UPDATED) -->
<section aria-labelledby="tab-step-4" class="view" data-step="4" id="panel-step-4" role="tabpanel">
<div class="section">
<div class="card">
<h3 class="title">ä½ çš„å°ˆå±¬æœå‹™</h3>
<p class="lead">æ¥ä¸‹ä¾†ï¼Œæˆ‘æœƒä¾ç…§ä½ çš„è»Šå‹èˆ‡ä½¿ç”¨ç¿’æ…£ï¼ŒæŒ‘å‡ºçœŸæ­£é©åˆçš„é¸é …ï¼šé«˜éšã€CP å€¼æˆ–ç¶“æ¿Ÿå‹ï¼Œæ€éº¼é¸éƒ½æ”¾å¿ƒã€‚</p>
<div style="display:flex;gap:8px;flex-wrap:wrap">
<span class="badge">ä¾è»Šå‹é…å°</span>
<span class="badge">AI æ™ºæ…§æ¨è–¦</span>
<span class="badge">é–€å¸‚å®‰è£é ç´„</span>
<span class="badge">åˆ°åº—å–è²¨</span>
</div>
<ul class="list" style="margin-top:8px">
<li><span class="dot2"></span><div><b>è¼ªèƒé¡§å•</b>ï¼šä¾é‡Œç¨‹èˆ‡é§•é§›ç¿’æ…£ï¼Œæä¾›æ¿•åœ°å‰è»Šï¼éœéŸ³ï¼è€ç£¨çš„å¹³è¡¡å»ºè­°ã€‚</div></li>
<li><span class="dot2"></span><div><b>ä¿é¤Šæé†’</b>ï¼šé‡Œç¨‹æˆ–æ™‚é–“åˆ°æœŸå‰ï¼Œæˆ‘æœƒæå‰æé†’ä½ ä¸¦æä¾›åˆé©çš„é ç´„æ™‚æ®µã€‚</div></li>
<li><span class="dot2"></span><div><b>çœå¿ƒæŒ‡å—</b>ï¼šé‡è¦ä¿é¤Šæˆ‘å¹«ä½ è¨˜ï¼Œç™¼ç¥¨èˆ‡ç´€éŒ„ä¹Ÿå¹«ä½ æ”¾å¥½ï¼ˆé›»å­åŒ–ä¸€éµæŸ¥ï¼‰ã€‚</div></li>
</ul>
</div>
<div class="card"></div>
</div>
<div class="nav">
<button class="btn ghost" data-prev="">ä¸Šä¸€æ­¥</button>
<div><button class="btn primary" data-next="">ä¸‹ä¸€æ­¥</button></div>
</div>
</section>
<!-- STEP 5 -->
<section aria-labelledby="tab-step-5" class="view" data-step="5" id="panel-step-5" role="tabpanel">
<div class="section" style="grid-template-columns:1fr">
<div class="card">
<h3 class="title">å®Œæˆï¼é–‹å§‹ä½ çš„å°ˆå±¬é«”é©—å§</h3>
<p class="lead">æ­å–œå®Œæˆå°è¦½ï¼ä½ çš„è»Šè¼›ç§˜æ›¸å·²å°±ä½ï¼Œæ¥ä¸‹ä¾†æˆ‘æœƒæ›¿ä½ ç…§é¡§æ„›è»Šã€æé†’ä¿é¤Šï¼Œä¹ŸæŠŠé©åˆä½ çš„å„ªæƒ å¥½å¥½æ”¶è—èµ·ä¾†ã€‚</p>
<p class="note">éœ€è¦æˆ‘æ™‚å«æˆ‘ä¸€è²å°±å¥½ï¼Œå‰©ä¸‹çš„äº¤çµ¦æˆ‘ã€‚</p>
<div id="summaryCard" style="margin-top:10px;border:1px solid #e5e7eb;border-radius:12px;padding:12px;display:flex;gap:12px;align-items:center">
<div style="width:36px;height:36px;border-radius:10px;background:#FFE4E7;display:flex;align-items:center;justify-content:center;font-weight:900;color:#E50012">ğŸš—</div>
<div style="flex:1">
<div style="font-weight:800">ä½ çš„è¨­å®šä¸€è¦½</div>
<div id="summaryText" style="color:#475569;font-size:14px">å°šæœªè¨­å®šè»Šå‹</div>
</div>
<button class="btn" id="editCarBtn">ä¿®æ”¹è»Šå‹</button>
</div>
<div style="margin-top:10px;border:1px solid #e5e7eb;border-radius:12px;padding:12px;display:flex;justify-content:space-between;align-items:center;gap:10px">
<div style="display:flex;gap:10px;align-items:center">
<div style="width:36px;height:36px;border-radius:10px;background:#ecfdf5;display:flex;align-items:center;justify-content:center;font-weight:900;color:#16a34a">ğŸ””</div>
<div>
<div style="font-weight:800">æ¥æ”¶å„ªæƒ èˆ‡ä¿é¤Šæé†’</div>
<div style="color:#475569;font-size:13px">æˆ‘æœƒåœ¨åˆé©çš„æ™‚é»ï¼Œä»¥ä½ åå¥½çš„æ–¹å¼é€šçŸ¥ä½ ã€‚</div>
</div>
</div>
<label style="display:inline-flex;align-items:center;gap:8px;cursor:pointer">
<input id="optIn" style="accent-color:#E50012" type="checkbox"/>
<span style="font-size:14px;color:#334155">é–‹å•Ÿ</span>
</label>
</div>
<div style="font-size:12px;color:#94a3b8;margin-top:6px">ä½ å¯ä»¥éš¨æ™‚åœ¨æœƒå“¡å°ˆå€ï¼é€šçŸ¥åå¥½ä¸­ä¿®æ”¹è¨­å®šã€‚</div>
<div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px">
<button class="btn primary" id="ctaMember2">æŸ¥çœ‹æœƒå“¡å°ˆå€</button>
<button class="btn" id="goTires2">çœ‹è¼ªèƒæ¨è–¦</button>
<button class="btn ghost" id="ctaStore">é ç´„é–€å¸‚</button>
<button class="btn ghost" id="ctaHome2">å›é¦–é </button>
</div>
<div class="banner" id="doneBanner" style="display:block;margin-top:10px;padding:12px;border:1px solid #bbf7d0;background:#ecfdf5;border-radius:12px;color:#065f46">å°è¦½å·²å®Œæˆã€‚ç¥ä½ ä¸€è·¯é †å¿ƒï¼</div>
</div>
</div>
<div class="nav">
<button class="btn ghost" data-prev="">ä¸Šä¸€æ­¥</button>
<div><button class="btn primary" id="finish">çµæŸå°è¦½</button></div>
</div>
</section>
<div class="footer">Â© 2025 è»Šéº—å±‹ Car Quality</div>
</div>
<script>
let step = 1;
const maxStep = 5;
const $ = (sel, ctx=document)=>ctx.querySelector(sel);
const $$ = (sel, ctx=document)=>Array.from(ctx.querySelectorAll(sel));
const views = $$('[data-step]');
const stepper = $('#stepper');


function render(){
  views.forEach(v=>v.classList.toggle('show', Number(v.dataset.step)===step));
  const nodes = $$('.step', stepper);
  nodes.forEach((n, i)=>{
    n.classList.toggle('active', i+1===step);
    n.classList.toggle('done', i+1<step);
  });

  localStorage.setItem('onboarding_step', String(step));
  focusActiveTab();
  setStepInURL(step);
}
function next(){ if(step<maxStep){ step++; render(); scrollToContent(); } }
function prev(){ if(step>1){ step--; render(); scrollToContent(); } }

// delegated events for next/prev
document.addEventListener('click', (e)=>{
  const t = e.target.closest('[data-next],[data-prev]');
  if(!t) return;
  e.preventDefault();
  if(t.hasAttribute('data-next')){ next(); }
  else if(t.hasAttribute('data-prev')){ prev(); }
});

// stepper click to jump
stepper.addEventListener('click', (e)=>{
  const tab = e.target.closest('.step');
  if(!tab) return;
  const idx = Array.from(stepper.children).indexOf(tab);
  if(idx >= 0){
    step = idx+1; render(); scrollToContent();
  }
});

function focusActiveTab(){
  const tabs = $$('.step', stepper);
  const active = tabs[step-1];
  tabs.forEach((t,i)=> t.setAttribute('aria-selected', i+1===step ? 'true':'false'));
  if(active) active.focus({preventScroll:true});
}
function scrollToContent(){
  const top = document.querySelector('.global-steps');
  if(!top) return;
  const y = top.getBoundingClientRect().bottom + window.scrollY;
  window.scrollTo({ top: y, behavior: 'smooth' });
}

// Car save
document.getElementById('saveCar')?.addEventListener('click', ()=>{
  const brand = document.getElementById('brand').value;
  const year = document.getElementById('year').value;
  const model = document.getElementById('model').value;
  const name = brand + ' ' + model + ' / ' + year;
  localStorage.setItem('myCar', name);
  document.getElementById('saveMsg').textContent = 'å·²å„²å­˜ï¼š' + name;
  const sb = document.getElementById('savedBanner'); if(sb) sb.style.display='block';
});

// Step 5 summary + opt-in
(function(){
  const sum = document.getElementById('summaryText');
  if(sum){
    const car = localStorage.getItem('myCar');
    sum.textContent = car ? car : 'å°šæœªè¨­å®šè»Šå‹';
  }
  document.getElementById('editCarBtn')?.addEventListener('click', ()=>{ step = 2; render(); scrollToContent(); });
  const optKey = 'notifyOptIn';
  const opt = document.getElementById('optIn');
  const saved = localStorage.getItem(optKey);
  if(saved && opt){ opt.checked = saved === '1'; }
  opt?.addEventListener('change', ()=>{
    localStorage.setItem(optKey, opt.checked ? '1':'0');
  });
})();

document.getElementById('finish')?.addEventListener('click', ()=>{
  localStorage.setItem('watchedGuide','1');
  alert('å°è¦½å®Œæˆï¼Œæ­¡è¿é–‹å§‹ä½ çš„å°ˆå±¬é«”é©—ï¼');
});

// Share helpers
function getStepFromURL(){
  try{
    const u = new URL(window.location.href);
    const s = Number(u.searchParams.get('step')||u.hash.replace('#step=','')||'0');
    if(Number.isFinite(s) && s>=1 && s<=maxStep) return s;
  }catch(e){}
  return 0;
}
function setStepInURL(n){
  try{
    const u = new URL(window.location.href);
    u.searchParams.set('step', String(n));
    history.replaceState(null, '', u.toString());
  }catch(e){}
}
function showToast(msg){
  const t = document.getElementById('toast');
  if(!t) return;
  t.textContent = msg||'å·²è¤‡è£½é€£çµ';
  t.classList.remove('show'); void t.offsetWidth;
  t.classList.add('show');
  setTimeout(()=> t.classList.remove('show'), 1500);
}

// init
(function(){
  const fromURL = getStepFromURL();
  const s = fromURL || Number(localStorage.getItem('onboarding_step')||'1');
  step = Math.min(Math.max(1,s), maxStep);
  render();
})();
</script>
</body>
</html>